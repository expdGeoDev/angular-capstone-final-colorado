<ngx-spinner
	bdColor="rgba(51,51,51,0.8)"
	size="medium"
	color="#fff"
	type="ball-8bits"
>
	<p style="font-size: 20px; color: white">Loading Data...</p>
</ngx-spinner>

<div class="w-75 p-5 mx-auto" xmlns:ngx="http://www.w3.org/1999/html">
	<div class="w-75 p-5 mx-auto">
		<div class="form-group text-primary p-3">
			<label class="text-primary" for="coffeeSearch">Search Roaster:</label>
			<input type="text" class="form-control d-block" id="coffeeSearch"
						 aria-describedby="coffeeSearchHelp" placeholder="Search for roaster..." [(ngModel)]="searchText" />
		</div>
		<div class="form-group text-primary p-3">
			<label for="roast">Select Roast Type:</label>
			<select class="form-control" id="roast" [(ngModel)]="roast">
				<option value="all">All</option>
				<option value="medium">Medium</option>
				<option value="dark">Dark</option>
			</select>
		</div>
		<button (click)="applySearch()" class="btn btn-primary mt-3 float-end me-3">Search</button>
	</div>
	@if (getPaginatedResult().length === 0) {
		<div class="w-75 p-5 mx-auto">
<!--			<h1>NO DATA</h1>-->

		</div>
	} @else {
		<div class="w-100 p-5 mx-auto">
			<table class="table table-striped">
				<thead>
				<tr>
					<th scope="col">Buttons</th>
					<th (click)="sortTable('id')" scope="col">Id <span [ngClass]="getSortClass('id')"></span></th>
					<th (click)="sortTable('active')" scope="col">Active <span [ngClass]="getSortClass('active')"></span>
					</th>
					<th (click)="sortTable('roaster')" scope="col">Roaster <span [ngClass]="getSortClass('roaster')"></span>
					</th>
					<th (click)="sortTable('roast')" scope="col">Roast <span [ngClass]="getSortClass('roast')"></span></th>
					<th (click)="sortTable('format')" scope="col">Format <span [ngClass]="getSortClass('format')"></span>
					</th>
					<th (click)="sortTable('singleOrigin')" scope="col">SingleOrigin <span
						[ngClass]="getSortClass('singleOrigin')"></span></th>
				</tr>
				</thead>

				<tbody>
					@for (coffee of getPaginatedResult(); track coffee; ) {
						<tr>
							<td scope="row">
<!--								Todo: Need to give purpose-->
								<button class="btn btn-outline-primary btn-sm" type="Edit">Edit</button>
								<button class="btn btn-outline-danger btn-sm" type="Deactivate">Deactivate</button>
							</td>
							<td scope="row">{{ coffee.id }}</td>
							<td scope="row">{{ coffee.active }}</td>
							<td scope="row">{{ coffee.roaster }}</td>
							<td scope="row">{{ coffee.roast }}</td>
							<td scope="row">{{ coffee.format }}</td>
							<td scope="row">{{ coffee.singleOrigin }}</td>
						</tr>
					}
				</tbody>
			</table>
			<ul class="pagination">
				<li class="page-item">
					<a class="page-link" aria-label="Previous" (click)="changePage(currentPage - 1)">
						<span aria-hidden="true">&laquo;</span>
					</a>
				</li>

				<li *ngFor="let pageNumber of [].constructor(calculateNumberOfPage()); let i = index" class="page-item">
					<a class="page-link" (click)="changePage(i+1)">
						{{ i + 1 }}
					</a>
				</li>

				<li class="page-item">
					<a class="page-link" aria-label="Next" (click)="changePage(currentPage + 1)">
						<span aria-hidden="true">&raquo;</span>
					</a>
				</li>
			</ul>
			<div class="form-group text-primary p-3 text-end">
				<label for="rowsPerPage">Rows per Page: &nbsp;</label>
				<select class="form-control-sm" id="rowsPerPage" [(ngModel)]="limit">
					<option value="10">10</option>
					<option value="25">25</option>
					<option value="50">50</option>
					<option value="100">100</option>
				</select>
			</div>
		</div>
	}
</div>
